---
title: Socket.IO λ¨λ“ μ‚¬μ©ν•κΈ°
date: 2025-04-26 16:32
categories:
  - Node.js
tags:
  - Node
  - WebSoket
  - SocketIO
_sort:
---

## Socket.IO λ¨λ“
κ°λ°μκ°€ μ›Ήμ†μΌ“μ„ λ³΄λ‹¤ κ°„νΈν•κ² μ‚¬μ©ν•  μ μλ” λ¨λ“μ…λ‹λ‹¤.  
`ws` λ³΄λ‹¤ νΈμμ„±μ΄ λ€ν­ κ°μ„ λμ—κΈ°μ— κ°λ°μ΄ μμ›”ν•©λ‹λ‹¤.  

## μ„¤μΉ
```
npm i socket.io
```

## μ‚¬μ© λ°©λ²•
κΈ°μ΅΄μ `ws` λ¥Ό μ‚¬μ©ν•  λ• μ„¤μ •ν–λ `socket.js` νμΌμ λ‚΄μ©μ„ μμ •ν•΄μ•Όν•©λ‹λ‹¤.  
```javascript
const SocketIO = require('socket.io');

module.exports = (server)=>{
    const io = SocketIO(server,{path: '/socket.io'});

    io.on('connection',(socket)=>{
        const req = socket.request;
        const ip = req.headers['x-forwarded-for'] || req.socket.remoteAddress;
        console.log('μƒλ΅μ΄ ν΄λΌμ΄μ–ΈνΈ μ ‘μ†',ip, socket.id);

        socket.on('reply',(data)=>{
            console.log(data);
        })

        socket.on('error',console.error);

        socket.on('disconnect',()=>{
            console.log('ν΄λΌμ΄μ–ΈνΈ μ ‘μ† ν•΄μ ',ip, socket.id); 
            clearInterval(socket.interval);
        });

        socket.interval = setInterval(()=>{
            socket.emit('news','Hello Socket.IO')
        },3000)
    })
}
```

μ—¬κΈ°μ„ `ws` μ™€ λ‹¬λΌμ§„ λ¶€λ¶„μ„ μ°μ–΄λ³΄μλ©΄  
1. `socket.io` μ `connection` μ΄λ²¤νΈκ°€ 2κ°μ μ½λ°± νλΌλ―Έν„°λ¥Ό λ°›μ§€ μ•κ³  ν•λ‚μ μ½λ°± νλΌλ―Έν„°λ§μ„ λ°›λ” λ‹¤
2. μ‚¬μ©μμ μ”μ²­(`req`) λ¥Ό νλΌλ―Έν„°μ—μ„ μ°Ύμ•„μ„ μ‚¬μ©ν•λ‹¤
3. `ws` μ—μ„λ” `send()` μ™€ `on()` μ„ ν†µν•΄ λ©”μ‹μ§€λ¥Ό μ£Όκ³  λ°›μ•μ§€λ§ `socket.io` μ—μ„λ” `emit()` κ³Ό `on()` μ„ μ‚¬μ©ν•λ‹¤.
4. `on()` μ—μ„λ” μ •ν•΄μ§„ μ΄λ²¤νΈμ μ ν•μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μ•„λ‹ κ°λ°μκ°€ μ΄λ²¤νΈμ ν‚¤λ¥Ό μ§€μ •ν•μ—¬ μ‚¬μ©ν•λ‹¤
5. `send()` μ— λ€μ‘λλ” `emit()` μ€ μ΄λ²¤νΈμ ν‚¤-κ°’ ν•νƒλ΅ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤
6. λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό λ• μ—°κ²° μƒνƒλ¥Ό ν™•μΈν•μ§€ μ•μ•„λ„ `socket.io` κ°€ μ—°κ²°μƒνƒλ¥Ό ν™•μΈ ν›„ μ „λ‹¬ν•λ‹¤

## λΈλΌμ°μ €μ—μ„ Socket.io μ‚¬μ©ν•κΈ°

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GIF μ±„ν…λ°©</title>
</head>
<body>
    <div>F12λ¥Ό λλ¬ console νƒ­κ³Ό network νƒ­μ„ ν™•μΈν•μ„Έμ”</div>
    <!--io λ¥Ό μ‚¬μ©ν•κΈ° μ„ν• μ¤ν¬λ¦½νΈ-->
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io.connect('ws://localhost:8005',{
            path:'/socket.io'
        });
        
        socket.on('news',(data)=>{
            console.log(data);
            socket.emit('reply','Hello NodeJS');
        })

    </script>
    </body>
</html>
```

μ—¬κΈ°μ„λ„ λ‡κ°€μ§€ `ws` μ™€ λ‹¬λΌμ§„ μ μ΄ μμµλ‹λ‹¤.
1. `ws` μ™€ λ‹¬λΌμ§„ λ¶€λ¶„μ€ μ—°κ²°ν•  λ• `path` μ†μ„±μ΄ ν•„μ”ν•΄μ§
2. `on()` μ΄λ²¤νΈλ¥Ό ν†µν•΄ λ©”μ‹μ§€λ¥Ό λ°›μ„ λ• μ΄λ²¤νΈμ ν‚¤λ¥Ό μ§€μ •ν•¨
3. `emit()` ν•  λ• ν‚¤-κ°’ ν•νƒλ΅ λ©”μ‹μ§€λ¥Ό μ „λ‹¬ν•¨

## ws μ™€ socket.io λΉ„κµ
|          | ws             | socket.io                               |
| -------- | -------------- | --------------------------------------- |
| λ©”μ‹μ§€ μ „μ†΅   | `send()` μ‚¬μ©    | `emit()` μΌλ΅ ν‚¤-κ°’ ν•νƒ μ‚¬μ©                   |
| μ΄λ²¤νΈ λ¦¬μ¤λ„  | μ •ν•΄μ§„ μ ν•μ μ΄λ²¤νΈ μ‚¬μ© | κ°λ°μκ°€ ν‚¤κ°’μΌλ΅ μ‚¬μ©ν• μ΄λ²¤νΈ μμ λ΅­κ² μ‚¬μ©               |
| μ—°κ²° μƒνƒ ν™•μΈ | κ°λ°μκ°€ μ§μ ‘ ν™•μΈ ν•„μ”  | `socket.io` μ—μ„ μ—°κ²°μƒνƒ ν™•μΈ                  |
| ν΄λ§ κΈ°λ¥ μ§€μ› | λ―Έμ§€μ›            | μ§€μ›ν•¨<br>μµμ΄ μ—°κ²°μ‹ http ν΄λ§μ„ μμ°¨λ΅€ μ‹λ„ν›„ ws λ΅ μ—°κ²°λ¨ |

π‘ν΄λ§ μ§€μ› μ—¬λ¶€μ ν™•μΈμ€ κ°λ°μ λ„κµ¬μ—μ„ μ•„λμ™€ κ°™μ΄ ν™•μΈμ΄ κ°€λ¥ν•©λ‹λ‹¤.
![](assets/img/screenshot/Pasted%20image%2020250506180316.png)  
κ°€μ¥ λ§μ§€λ§‰ μ—°κ²°μ€ `ws` ν”„λ΅ν† μ½μ„ μ‚¬μ©ν–μ§€λ§ μ„ 3νμ μ‹λ„λ” `http` ν”„λ΅ν† μ½μ„ μ‚¬μ©ν• ν΄λ§ μ—°κ²°μ„ μ‹λ„ν• ν”μ μ…λ‹λ‹¤.  
