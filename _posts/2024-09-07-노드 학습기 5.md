---
title: ë…¸ë“œë„ í•œ ê±¸ìŒë¶€í„° 5ì¼ì°¨
date: 2024-09-07
categories:
  - javascript
  - Node.js
tags:
  - Node
  - javascript
---
ì•ˆë…•í•˜ì„¸ìš” ì´ë²ˆì—” ë…¸ë“œ ë‚´ì¥ ëª¨ë“ˆì— ëŒ€í•´ ê³µë¶€í•˜ê³  ì •ë¦¬í•©ë‹ˆë‹¤.  

ì§€ë‚œ ë²ˆì—ëŠ” ë‚´ì¥ ê°ì²´ì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. ëª…ì¹­ì´ ë¹„ìŠ·í•´ì„œ í–ˆê°ˆë¦¬ë„¤ìš”.  

ê¸€ì— ì•ì„œ ë‚´ì¥ ëª¨ë“ˆì— ëŒ€í•œ ì •ë³´ëŠ” nodeJS ê³µì‹ ë¬¸ì„œì—ì„œë„ ìì„¸íˆ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤  
[https://nodejs.org/docs/latest/api/](https://nodejs.org/docs/latest/api/)  

## ëª©ì°¨
1. [os](#os)
2. [path](#path)
3. [url](#url)
4. [dns](#dns)
5. [crypto](#crypto)
6. [util](#util)
7. [worker_threads](#worker_threads)

---
## os
ìš´ì˜ ì²´ì œì˜ ì •ë³´ë¥¼ ê°€ì§€ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.  
ë‚´ì¥ ëª¨ë“ˆì´ê¸° ë•Œë¬¸ì— ì§ì ‘ ë§Œë“  ëª¨ë“ˆì²˜ëŸ¼ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì§€ ì•Šê³  ì´ë¦„ë§Œ ì…ë ¥í•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ì€ ê¸°ëŠ¥ë“¤ì´ ìˆëŠ”ë° ì œê°€ ëˆˆì—¬ê²¨ ë´¤ë˜ ê¸°ëŠ¥ë§Œ ì •ë¦¬í•´ë´…ë‹ˆë‹¤. 

- os.uptime() : osê°€ ì‹¤í–‰ë˜ê³  íë¥¸ ì‹œê°„ì„ í™•ì¸í•©ë‹ˆë‹¤
- os.cpus() : osì˜ cpu ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
- os.freemem() : ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ì˜ ì–‘ì„ ë°”ì´íŠ¸ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
- os.totalmem() : ì‹œìŠ¤í…œ ë©”ëª¨ë¦¬ì˜ ì´ ì–‘ì„ ë°”ì´íŠ¸ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

---
## path
ìš´ì˜ì²´ì œì— ë”°ë¼ ê²½ë¡œë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•ì´ ë‹¤ë¥¸ë° ì´ë¥¼ í•¸ë“¤ë§ í•˜ëŠ”ë° ë„ì›€ì´ ë˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.  
ê³µì‹ ë¬¸ì„œì—ì„œëŠ” ìš´ì˜ì²´ì œë¥¼ Windowsì™€ POSIX ë¡œ êµ¬ë¶„í•˜ì—¬ ì„¤ëª…í•˜ê³  ìˆëŠ”ë°ìš”. ì„œë¡œ ê²½ë¡œë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ POSIXëŠ” ë§¥ê³¼ ë¦¬ëˆ…ìŠ¤ ë“±ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.  
ìš´ì˜ ì²´ì œì— ë”°ë¼ ì¼ë¶€ ê¸°ëŠ¥ì€ ì„œë¡œ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ì€ ë¬¸ì„œë¥¼ ë³´ê³  í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.

- `path.basename(path[,suffix])` : ê²½ë¡œì˜ ë§ˆì§€ë§‰ ë¶€ë¶„ì„ ë°˜í™˜í•˜ë©° ëª…ì‹œëœ í™•ì¥ìëŠ” ì œê±°í•©ë‹ˆë‹¤.
- `path.dirname(path)` : ê²½ë¡œì˜ ë””ë ‰í† ë¦¬ ì´ë¦„ê¹Œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. `path.basename()` ê³¼ëŠ” ë°˜ëŒ€ë„¤ìš”
- `path.extname(path)` : í™•ì¥ìë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- `path.join([...paths])` : ê²½ë¡œë¥¼ ì—°ê²°í•´ì„œ ë°˜í™˜í•©ë‹ˆë‹¤. `..` ê°™ì´ ìƒìœ„ë¡œ ê°€ëŠ” ìš”ì†Œê°€ ìˆë‹¤ë©´ ì´ê²ƒë„ ì²˜ë¦¬í•´ì„œ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ë•Œ ì ˆëŒ€ ê²½ë¡œëŠ” ë¬´ì‹œí•©ë‹ˆë‹¤.
- `path.resolve([...paths])` : `join()` ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ì ˆëŒ€ê²½ë¡œë¥¼ í¬í•¨í•´ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- `ë¬¸ìì—´ê²½ë¡œ.split(path.sep)` : ê²½ë¡œì˜ ì„¸ê·¸ë¨¼íŠ¸ êµ¬ë¶„ ê¸°í˜¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬¸ìì—´ì„ ë‚˜ëˆˆ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
- `path.normalize(path)` : ì£¼ì–´ì§„ `path` ë¥¼ ì •ê·œí™” í•©ë‹ˆë‹¤. 

---
## url
URLì„ í•¸ë“¤ë§ í•˜ëŠ”ë°ì— ë„ì›€ì´ ë˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” ë…¸ë“œì—ì„œ ë…ìì ìœ¼ë¡œ ì‚¬ìš©í•˜ë˜ url ì²˜ë¦¬ ë°©ì‹ì´ ìˆê³  WHATWG ë°©ì‹ì´ ìˆëŠ”ë°ìš” í˜„ì¬ëŠ” WHATWG ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
URL ì²˜ë¦¬ì— ì•Œê¸°ì „ì— ì•ì„œ URLì˜ êµ¬ì¡°ì— ëŒ€í•´ ì•Œì•„ ë†“ì„ í•„ìš”ê°€ ìˆëŠ”ë°ìš”  
URLì€ ë‹¤ìŒì˜ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.  

![](assets/img/screenshot/Pasted%20image%2020240907203707.png)  

í•˜ë‚˜ì˜ URLì— ì´ë ‡ê²Œ ë³µì¡í•œ êµ¬ì¡°ê°€! í•˜ì§€ë§Œ url ëª¨ë“ˆì„ ì´ìš©í•œë‹¤ë©´ URLì— ëŒ€í•´ ì¼ì¼ì´ íŒŒì•…í•˜ê³  ë¶„ì„í•˜ì§€ ì•Šì•„ë„ ë³´ê¸° ì¢‹ê²Œ ì •ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

url ëª¨ë“ˆì„ ì‚¬ìš©í•´ì„œ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ê¸° ìœ„í•œ ì˜ˆì œ ì½”ë“œì…ë‹ˆë‹¤. 

```javascript
const url = require('url');

const {URL} = url;  

const myURL = new URL('htt://www.github.co.kr/book/bookList.aspx?sercate1=001001000#anchor');

console.log('new URL : ', myURL);

console.log('url.format() : ', url.format(myURL));
```

logì— ë‚¨ì€ ê²°ê³¼ì…ë‹ˆë‹¤.  

```
new URL :  URL {
  href: 'htt://www.github.co.kr/book/bookList.aspx?sercate1=001001000#anchor',
  origin: 'null',
  protocol: 'htt:',
  username: '',
  password: '',
  host: 'www.github.co.kr',
  hostname: 'www.github.co.kr',
  port: '',
  pathname: '/book/bookList.aspx',
  search: '?sercate1=001001000',
  searchParams: URLSearchParams { 'sercate1' => '001001000' },
  hash: '#anchor'
}
url.format() :  htt://www.github.co.kr/book/bookList.aspx?sercate1=001001000#anchor
```

`myURL` ê°ì²´ë¥¼ logì— ì°ì–´ë³´ë‹ˆ êµ¬ì¡°ë³„ë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì—¬ê¸°ì„œ `searchParams` ëŠ” `search` ì˜ ê°’ì„ ê°ì²´í™” í•œ ê²ƒ ì…ë‹ˆë‹¤.

### searchParams
urlì˜ searchParamsì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.

- `getAll(key)` : key ì— í•´ë‹¹ í•˜ëŠ” valueë¥¼ ëª©ë¡ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
- `get(key)` : key ì— í•´ë‹¹í•˜ëŠ” valueë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì—†ë‹¤ë©´ null ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
- `has(key)` : keyê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
- `keys()` : keyë¥¼ ëª©ë¡ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
- `values()` : valueë¥¼ ëª©ë¡ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
- `append(key,value)` : keyì— valueë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ê°™ì€ í‚¤ì— ê°’ì´ ìˆë‹¤ë©´ ë°°ì—´ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
- `set(key,value)` : keyì— valueë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ê¸°ì¡´ì˜ ê°’ì„ ë®ì–´ì”ë‹ˆë‹¤.
- `delete(key)` : keyì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì§€ì›ë‹ˆë‹¤
- `toString()` : searchParam ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

---
## dns
DNSë¥¼ ë‹¤ë£° ë•Œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤. ë„ë©”ì¸ì„ í†µí•´ IPë‚˜ DNS ì •ë³´ë¥¼ ì–»ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  
DNSì— ê´€í•´ì„œ ìì„¸í•œ ë¶€ë¶„ì€ ë‹¤ìŒì— ê³µë¶€í•˜ê³  ì¼ë‹¨ DNS RECORDì— ëŒ€í•´ ê°„ë‹¨í•˜ê²Œ ì•Œê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.  
DNS RECORDëŠ” DNSì—ì„œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ í•­ëª©ì…ë‹ˆë‹¤. ì„¤ëª…ì´ ì–´ë µë„¤ìš”. ì¸í„°ë„·ì—ì„œëŠ” ì„¤ëª…ì´ ì „ë¶€ ì–´ë µìŠµë‹ˆë‹¤.  
ë³´ë‹¤ ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ ì–´ë– í•œ ì£¼ì†Œì™€ ê·¸ ì£¼ì†Œì— ì—°ê²°ëœ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì •ë³´ì…ë‹ˆë‹¤. DNS RECORDì—ëŠ” ëª‡ ê°€ì§€ ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤.  
ì´ ìœ í˜•ì— ëŒ€í•´ì„œëŠ” ë”°ë¡œ ì •ë¦¬í•´ë³´ê³  ì—¬ê¸°ì„œëŠ” DNS RECORDë¼ëŠ” ê²ƒì´ ìˆê³ , ëª‡ ê°€ì§€ì˜ ì¢…ë¥˜ê°€ ì •í•´ì ¸ìˆë‹¤ëŠ” ê²ƒë§Œ ì¸ì§€í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.

- `lookup(url)` : ipì£¼ì†Œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤
- `resolve(url,record)` : urlì˜ recordì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

---
## crypto
ë…¸ë“œì˜ ì£¼ìš” ë‚´ì¥ ëª¨ë“ˆ ì¤‘ í•˜ë‚˜ì¸ `crypto` ì…ë‹ˆë‹¤. ì•”í˜¸í™”ë¥¼ ë‹´ë‹¹í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.  
ë‹¨ë°©í–¥ ì•”í˜¸í™” & ì–‘ë°©í–¥ ì•”í˜¸í™”ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.  

### í•´ì‹œ ê¸°ë²•
ë‹¨ë°©í–¥ ì•”í˜¸í™”ì˜ ëŒ€í‘œì ì¸ ë°©ë²• ì…ë‹ˆë‹¤. í•´ì‹œ ê¸°ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ì ì¸ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```javascript
const crypto = require('crypto');
//...ê¸°íƒ€ ì‘ì—… ìƒëµ
crypto.createHash({í•´ì‹œ_ì•Œê³ ë¦¬ì¦˜}).update({ë¬¸ìì—´}).digest({ì¸ì½”ë”©_ì•Œê³ ë¦¬ì¦˜});
```

í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì€ `sha512` ê°€ ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. `md5` , `sha1` ë“± ë‹¤ì–‘í•œ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ë„ ìˆì§€ë§Œ `sha512` ëŠ” ë¸”ë¡ì²´ì¸ì—ì„œë„ ì‚¬ìš©ë˜ëŠ” ê°•ë ¥í•œ í•´ì‹œë¥¼ ì œê³µí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ì…ë‹ˆë‹¤.  
ì¸ì½”ë”© ì•Œê³ ë¦¬ì¦˜ì—ëŠ” `base64` ê°€ ì œì¼ ë³´í¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.  

### pbkdf2
ìƒˆë¡œìš´ ì•”í˜¸í™” ë°©ë²•ì…ë‹ˆë‹¤.  
`pbkdf2` ì˜ ê°€ì¥ í° íŠ¹ì§•ì€ `salt` ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì˜ë¯¸í•˜ëŠ” `salt` ëŠ” ì§„ì§œ ë§ê·¸ëŒ€ë¡œ ì†Œê¸ˆê³¼ ê°™ì€ ì—­í• ì…ë‹ˆë‹¤.  
ì•”í˜¸í™”ë¥¼ í•˜ë ¤ëŠ” ë¬¸ìì—´ì— ì†Œê¸ˆì„ ì³ì„œ ì›ë˜ ë¬¸ìì—´ì— ë³€í™”ë¥¼ ì£¼ì–´, ë³´ë‹¤ í•´ë…ì„ ì–´ë µê²Œ ë§Œë“œëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.  
ë§Œì•½ `salt` ì˜ ê°’ì´ ë°”ë€Œì–´ ë²„ë¦°ë‹¤ë©´ ê²°ê³¼ë„ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— `salt` ì˜ ê°’ì€ ë³€í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.  
`pbkdf2` ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```javascript
const crypto = require('crypto');
//...ê¸°íƒ€ ì½”ë“œ ìƒëµ
crypto.randomBytes({ë°”ì´íŠ¸_í¬ê¸°},(err,buf)=>{ // salt ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ëœë¤ ë°”ì´íŠ¸ ìƒì„±
Â  Â  const salt = buf.toString('base64'); // ìƒì„±ëœ ëœë¤í•œ ë°”ì´íŠ¸ë¥¼ salt ë¡œ ì €ì¥
Â  Â  crypto.pbkdf2(
	Â  Â  {ì•”í˜¸í™”_í• _ë¬¸ìì—´},{salt},{ë°˜ë³µíšŸìˆ˜},{ì¶œë ¥ë°”ì´íŠ¸},{í•´ì‹œ_ì•Œê³ ë¦¬ì¦˜},
	Â  Â  (err,key)=>{
	Â  Â  Â  Â  // ì½œë°± ì‘ì—…
	Â  Â  }
	)
})
```

**â“ê¶ê¸ˆí–ˆë˜ì  ğŸ¤”** ë§¤ë²ˆ ë‹¤ë¥¸ `salt` ë¥¼ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ë¹„ë°€ë²ˆí˜¸ì— ì–´ë–¤ `salt` ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ ì–´ë–»ê²Œ ì•„ëŠ”ê±°ì§€? ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ìƒê°í•´ë³´ë©´ saltë¥¼ í•¨ê»˜ ì €ì¥í•˜ë©´ ë˜ëŠ” ê²ƒ ì´ì—ˆìŠµë‹ˆë‹¤.

### ì–‘ë°©í–¥ ì•”í˜¸í™”
ì•”í˜¸í™” ë° ë³µí˜¸í™” ë‘˜ ë‹¤ ê°€ëŠ¥í•œ ì•”í˜¸í™” ë°©ë²•ì…ë‹ˆë‹¤.  
ëŒ€ì¹­í˜• ì•”í˜¸í™”ì™€ ë¹„ëŒ€ì¹­í˜• ì•”í˜¸í™” ë‘ ê°€ì§€ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. <small>ì •ì²˜ê¸° ê³µë¶€í•  ë•Œ ë‚˜ì˜¤ë˜ ìš©ì–´ê°€ ì—¬ê¸°ì„œ...!</small>  

#### ëŒ€ì¹­í˜• ì•”í˜¸í™”
í‚¤ë¥¼ ì‚¬ìš©í•´ì„œ ì•”í˜¸í™”ë¥¼ í•˜ê³  í‚¤ë¥¼ í†µí•´ ë³µí˜¸í™” í•©ë‹ˆë‹¤. ë•Œë¬¸ì— ì•”í˜¸í™”-ë³µí˜¸í™” í•  ë•Œì—ëŠ” ê°™ì€ í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.  

ëŒ€ì¹­í˜• ì•”í˜¸í™”ì˜ ì˜ˆì œ ì½”ë“œ ì…ë‹ˆë‹¤.

```javascript
const crypto = require('crypto');

const algorithm = 'aes-256-cbc'; // ì•Œê³ ë¦¬ì¦˜ì˜ ì¢…ë¥˜ëŠ” ì„ íƒ
const key = 'abcdefghijklmnopqrstuvwxyz123456'; // 32ë°”ì´íŠ¸
const iv = "abcdefghijklmnop"; // 16 ë°”ì´íŠ¸
// keyì™€ ivì˜ ê¸¸ì´ëŠ” algorithmì— ë”°ë¼ ë‹¬ë¼ì§.

const cipher = crypto.createCipheriv(algorithm,key,iv);
let result = cipher.update({ì•”í˜¸í™”_í• _ë¬¸ìì—´},{í‰ë¬¸ì˜_ì¸ì½”ë”©},{ì•”í˜¸ë¬¸ì˜_ì¸ì½”ë”©});
result += cipher.final({ì•”í˜¸ë¬¸ì˜_ì¸ì½”ë”©});

const decipher = crypto.createDecipheriv(algorithm,key,iv);
let result2 = decipher.update(result,{ì•”í˜¸ë¬¸ì˜_ì¸ì½”ë”©},{í‰ë¬¸ì˜_ì¸ì½”ë”©});
result2 += decipher.final({í‰ë¬¸_ì¸ì½”ë”©});
```

ì˜ˆì „ì—ëŠ” ì—†ì—ˆë˜ `iv` ê°€ ì•”í˜¸í™” í•˜ëŠ”ë° ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ë³´ì•ˆ ì·¨ì•½ì  ë•Œë¬¸ì´ë¼ê³ ...  
ì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ” `key` ëŠ” ê³ ì •ëœ ë¶ˆë³€ ê°’ìœ¼ë¡œ ëª¨ë“  ë¹„ë°€ë²ˆí˜¸ì— ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.  ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì†ŒìŠ¤ì—ì„œ ìì²´ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë³´ì•ˆì— ìœ„í˜‘ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¼ë°˜ì ìœ¼ë¡œëŠ” í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.  
`iv` ëŠ” ì•”í˜¸í™” í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ `iv` ê°€ ìƒì„±ë˜ì–´ ë§¤ë²ˆ ìƒˆë¡œìš´ ì•”í˜¸ë¬¸ì´ ìƒì„±ë˜ë„ë¡ í•©ë‹ˆë‹¤. í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì˜ `salt` ì™€ ë¹„ìŠ·í•œ ì—­í• ì´ë¼ ìƒê°ë©ë‹ˆë‹¤.  

---
## util
ê°ì¢… í¸ì˜ ê¸°ëŠ¥ì„ ëª¨ì•„ ë†“ì€ ëª¨ë“ˆì…ë‹ˆë‹¤. í¸ì˜ ê¸°ëŠ¥ì˜ ì§‘í•© ëª¨ë“ˆì´ë‹¤ ë³´ë‹ˆ ë¬¸ì„œì˜ ì–‘ë„ êµ‰ì¥íˆ ë§ë„¤ìš”.  
ì—¬ê¸°ì„œëŠ” ê°•ì˜ì—ì„œ ì–¸ê¸‰í•œ `deprecate` ì™€ `promisify` ì— ëŒ€í•´ì„œë§Œ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.

### deprecate
deprecated ëœ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì‚¬ìš© ë°©ë²•ì€ ë‹¤ìŒì˜ ì˜ˆì œì™€ ê°™ìŠµë‹ˆë‹¤.  

```javascript
const util = require('util');

const oldFunction = (x,y) => {
Â  Â  console.log(x+y);
}

const deprecatedFunction = util.deprecate(oldFunction,'deprecated ë˜ì—ˆìœ¼ë‹ˆ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”');

export default deprecatedFunction;
```

**ì˜ì•„í–ˆë˜ì ğŸ¤”â“** ìœ„ì˜ ì˜ˆì œì—ì„œ deprecateí•œ `deprecatedFunction()` ê°€ ì•„ë‹ˆë¼ `oldFunction()` ì„ í˜¸ì¶œí•˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ê±°ì§€? ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤ë§Œ ëª¨ë“ˆí™”ëœ ì‹œì ì—ì„œ ê·¸ëŸ° ë°©ë²•ì€ ë¶ˆê°€ëŠ¥ í–ˆìŠµë‹ˆë‹¤.  
ì œê°€ ë³´ê³  ìˆëŠ” ê°•ì˜ì—ì„œëŠ” ëª¨ë“ˆí™” í•˜ì§€ ì•Šê³  deprecateí•œ í•¨ìˆ˜ë¥¼ ë°”ë¡œ ì•„ë˜ì—ì„œ í˜¸ì¶œí•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤ë§Œ, ì‚¬ì‹¤ìƒ ë…¸ë“œì—ì„œëŠ” ëª¨ë“ˆí™” í•´ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê°™ì€ ëª¨ë“ˆ ë‚´ì—ì„œ deprecate í•˜ê¸° ì „ì˜ í•¨ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ í˜¸ì¶œí•  ê²½ìš° ì™¸ì—ëŠ” ì—†ê² ìŠµë‹ˆë‹¤.

### promisify
ì½œë°± í•¨ìˆ˜ë¡œ ì‚¬ìš©í•˜ë˜ ê²ƒë“¤ì„ í”„ë¡œë¯¸ìŠ¤ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ìš”ì¦˜ì—ëŠ” ì½œë°± í•¨ìˆ˜ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ê¶Œì¥ë˜ê³  ìˆê³  ì½”ë“œë„ ê°„ê²°í•˜ê¸° ë•Œë¬¸ì— ì½œë°± í•¨ìˆ˜ë¡œ ì‘ì„±ëœ ë ˆê±°ì‹œ ì½”ë“œë“¤ì„ í•¸ë“¤ë§ í•˜ê¸° í˜ë“  ê²½ìš°ê°€ ë§ì€ë°, ì´ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.  
`promisify()` í•¨ìˆ˜ ë‚´ì— ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ì–´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆì œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  

```javascript
const util = require('util');
const crypto = require('crypto');

// ì½œë°± í•¨ìˆ˜ë¡œ í•¸ë“¤ë§ í•˜ë˜ crypto.randomBytesë¥¼ í”„ë¡œë¯¸ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
const randomBytePromise = util.promisify(crypto.randomBytes); 

// crypto.randomBytes ì˜ ê¸°ëŠ¥ê³¼ ë™ì¼í•˜ê²Œ ë°”ì´íŠ¸ í¬ê¸°ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬
randomBytePromise(64) 
.then((buf)=>{
Â  Â  console.log(buf.toString('base64'));
})
.catch((err)=>{
Â  Â  console.error(err);
})
```

í”„ë¡œë¯¸ìŠ¤ í˜•ì‹ìœ¼ë¡œ ë°”ê¿¨ê¸° ë•Œë¬¸ì— `then()` , `catch()` ê°€ ì‚¬ìš© ê°€ëŠ¥ í•  ë¿ë§Œ ì•„ë‹ˆë¼ async/await ë¬¸ë²•ë„ ì‚¬ìš© ê°€ëŠ¥ í•©ë‹ˆë‹¤.
ë‹¨ ì—¬ê¸°ì„œ ì£¼ì˜ í•´ì•¼ í•  ì ì´ ìˆìŠµë‹ˆë‹¤âš ï¸ ì½œë°±ì˜ í˜•ì‹ì´ `(err,data)=>{}` ì˜ í˜•ì‹ì„ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

---
## worker_threads
ì‹±ê¸€ ìŠ¤ë ˆë“œì¸ ë…¸ë“œê°€ ë©€í‹° ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.  
ë…¸ë“œì—ì„œ ë©€í‹° ìŠ¤ë ˆë“œ ì‘ì—… ë°©ì‹ì— ëŒ€í•´ ë¬´ì§€í•˜ê¸° ë•Œë¬¸ì— ê°„ë‹¨í•œ ì›Œí¬ í”Œë¡œìš°ë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.  

> 1. ë©”ì¸ìŠ¤ë ˆë“œì¼ ê²½ìš° -> ì›Œì»¤ ìŠ¤ë ˆë“œ ìƒì„± í›„ ì‘ì—… ë¶„ë°° 
> 2. ì›Œì»¤ìŠ¤ë ˆë“œì¸ ê²½ìš° -> ë¶„ë°°ëœ ì‘ì—… ì²˜ë¦¬
> 3. ë©”ì¸ ìŠ¤ë ˆë“œê°€ ì›Œì»¤ ìŠ¤ë ˆë“œì˜ ì‘ì—…ì´ ì¢…ë£Œëœ ê²ƒì„ í™•ì¸ í›„ ë³‘í•©í•˜ì—¬ ìµœì¢… ì €ë¦¬

ì €ëŠ” ë©€í‹° ìŠ¤ë ˆë“œ ì‘ì—… ë°©ì‹ì— ëŒ€í•´ ì˜ ëª°ë¼ì„œ íŠ¹ì • ì‘ì—…ì„ ë©€í‹°ìŠ¤ë ˆë“œë¡œ ì²˜ë¦¬í•˜ê² ë‹¤ê³  ëª…ì‹œí•˜ë©´ ëª¨ë“ˆì´ ì•Œì•„ì„œ ìŠ¤ë ˆë“œ ë§Œë“¤ê³  ì‘ì—… ë¶„ë°°í•˜ê³  ì²˜ë¦¬í•  ì¤„ ì•Œì•˜ëŠ”ë° ì•„ë‹ˆêµ°ìš”.  

ì œê°€ ê³µë¶€í•˜ë©° ëŠë‚€ `worker_threads` ì˜ ì¥ì ê³¼ ë‹¨ì  ì…ë‹ˆë‹¤.
ì¥ì 
1. ë¹ ë¥¸ ì†ë„
2. íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©
ë‹¨ì 
1. ì½”ë“œ ë³µì¡ì„± ì¦ê°€

ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ê³  ì²˜ë¦¬í•˜ëŠ” ì‘ì—… ë˜í•œ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ìŠ¤ë ˆë“œ ìˆ˜ê°€ ê³§ ì‘ì—… ì†ë„ì™€ ë°˜ë“œì‹œ ë¹„ë¡€í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.

<details>
  <summary>worker_threads ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì˜ˆì œ</summary>
<div markdown="1">
<pre><code>
const min = 2;
const max = 10_000_000;
const primes = [];

function generatePrimes(start,range){
Â  Â  let isPrime = true;
Â  Â  const end = start + range;
Â  Â  for (let i = start; i < end; i++){
Â  Â  Â  Â  for(let j = min; j < Math.sqrt(end);j++){
Â  Â  Â  Â  Â  Â  if(i !== j && i % j === 0){
Â  Â  Â  Â  Â  Â  Â  Â  isPrime = false;
Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  if(isPrime){
Â  Â  Â  Â  Â  Â  primes.push(i);
Â  Â  Â  Â  }
Â  Â  Â  Â  isPrime = true;
Â  Â  }
}

console.time('prime');
generatePrimes(min,max);
console.timeEnd('prime');
console.log(primes.length);
</code></pre>

</div>
</details>


<details>
  <summary>worker_threads ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œ</summary>
<div markdown="1">
<pre><code>
 const { isMainThread, Worker, parentPort, workerData} = require('worker_threads')

const min = 2;
let primes = [];

function findPrimes(start,range){
    let isPrime = true;
    const end = start + range;
    for (let i = start; i < end; i++){
        for(let j = min; j < Math.sqrt(end);j++){
            if(i !== j && i % j === 0){
                isPrime = false;
                break;
            }
        }

        if(isPrime){
            primes.push(i);
        }
        isPrime = true;
    }
}

if(isMainThread){
    const max = 10_000_000;
    const threadCount = 8;
    const threads = new Set();
    const range = Math.ceil((max-min)/threadCount);
    let start = min;
    console.time('primes');
    for(let i = 0; i < threadCount - 1; i++){
        const wStart = start;
        threads.add(new Worker(__filename,{workerData:{start : wStart, range, index:i}}));
        start += range;
    }

    threads.add(new Worker(__filename,{workerData: {start, range : range+((max-min+1)%threadCount),index:7}}))

    for(let worker of threads){
        worker.on('error',(err)=>{
            throw err;
        })

        worker.on('exit',()=>{
            threads.delete(worker);
            if(threads.size === 0){
                console.timeEnd('primes');
                console.log(primes.length);
            }
        })

        worker.on('message',(msg)=>{
            primes = primes.concat(msg);
        })
    }
} else {
    console.log('start:',workerData.start,',range:',workerData.range,',index:',workerData.index);
    findPrimes(workerData.start, workerData.range);
    parentPort.postMessage(primes);
}

</code></pre>

</div>
</details>


---

