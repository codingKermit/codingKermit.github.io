---
title: SSE μ‚¬μ©ν•κΈ°
date: 2025-05-17 20:38
categories:
  - Node.js
tags:
  - Node
  - javascript
  - express
  - SSE
_sort:
---
μ•λ…•ν•μ„Έμ” πΈ  

## SSE(Server-Sent-Event)
μ„λ²„μ λ°μ΄ν„°λ¥Ό μ‹¤μ‹κ°„μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ” μ΄λ²¤νΈ μ…λ‹λ‹¤.  
μ‹¤μ‹κ°„ ν†µμ‹ μ΄λΌλ” μ μ€ μ›Ήμ†μΌ“κ³Ό μ μ‚¬ν•©λ‹λ‹¤.  
ν•μ§€λ§ SSEλ” μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚΄λ” λ‹¨λ°©ν–¥ ν†µμ‹ λ§ κ°€λ¥ν•©λ‹λ‹¤.  
μ‹¤μ‹κ°„ ν†µμ‹ μ€ ν•„μ”ν•μ§€λ§ μ–‘λ°©ν–¥μΌ ν•„μ”λ” μ—†λ” κ²½μ° μ μ ν•κ² μ“Έ μ μμµλ‹λ‹¤.  

## κµ¬ν„ν•κΈ°
κµ¬ν„ λ°©λ²•μ€ μ›Ήμ†μΌ“μ κµ¬ν„ λ°©λ²•κ³Ό μ μ‚¬ν•©λ‹λ‹¤.  
λ‹¨, κµ¬λ²„μ „ μµμ¤ν”λ΅λ¬ μ‚¬μ©μλ” ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ λ³„λ„μ μ¤ν¬λ¦½νΈλ¥Ό μ‚½μ…ν•΄μ¤μ•Ό ν•©λ‹λ‹¤.  

### ν΄λΌμ΄μ–ΈνΈ
λ€λ¶€λ¶„μ ν΄λΌμ΄μ–ΈνΈλ” **EventSource** λ¥Ό μ§€μ›ν•©λ‹λ‹¤.  

```html
<script>
	// sse λ―Έλ“¤μ›¨μ–΄λ¥Ό μ‚¬μ©ν•λ©΄ κΈ°λ³Έ κ²½λ΅λ” /sse
	const es = new EventSource('/sse');
	es.onmessage = function(e){
		const data = e.data;
		console.log('data',data);
	}
</script>
```

κµ¬λ²„μ „ μµμ¤ν”λ΅λ¬μ—μ„λ” EventSourceκ°€ μ§€μ›λμ§€ μ•κΈ° λ•λ¬Έμ— μ•„λ μ¤ν¬λ¦½νΈλ¥Ό μ¶”κ°€λ΅ μ‚½μ…ν•©λ‹λ‹¤.  

```html
<script src="https://unpkg.com/event-source-polyfill/src/eventsource.min.js"></script>
```

### μ„λ²„

#### SSE λ―Έλ“¤μ›¨μ–΄ μ„¤μΉ
```
npm i sse
```

#### SSE μ—°κ²°
```javascript
/*
	file:app.js 
*/
const SSE = require('sse');
/*μƒλµ*/
const server = app.listen(app.get('port'), () => {
Β  console.log(app.get('port'), 'λ² ν¬νΈμ—μ„ λ€κΈ°μ¤‘');
});

// μƒμ„±μμ λ‘ λ²μ§Έ νλΌλ―Έν„°λ΅ μµμ…μ„ μ „λ‹¬ ν•  μ μλ‹¤
const sse = new SSE(server);
sse.on('connection',(client)=>{
	setInterval(()=>{
		client.send(Date.now().toString());
	},1000);
})

```

SSE λ―Έλ“¤μ›¨μ–΄λ„ `socket.io` μ²λΌ `path` μµμ…μ„ ν†µν•΄ SSE μ—°κ²°ν•  URLμ„ μ„¤μ •ν•©λ‹λ‹¤.  
κΈ°λ³Έκ°’μ€ `/sse` μ…λ‹λ‹¤.  

λ§μ•½ URLμ„ λ³€κ²½ν•κ³  μ‹¶λ‹¤λ©΄ μ•„λμ™€ κ°™μ΄ ν•΄μ•Όν•©λ‹λ‹¤.

```javascript
const sse = new SSE(server,{
	path:'/sseTest'
})
```

ν΄λΌμ΄μ–ΈνΈλ” μ΄μ™€ λ§μ¶° EventSource λ¥Ό λ³€κ²½ν•©λ‹λ‹¤.  

```html
<script>
	const es = new EventSource('/sseTest');
</script>
```

## μ—°κ²° ν™•μΈ
![](assets/img/screenshot/Pasted%20image%2020250517211359.png)  
`/sse` λ΅ μ—°κ²°μ΄ λμ—μμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.  
μ„λ²„μ—μ„ λ³΄λ‚΄μ§€λ” λ°μ΄ν„°λ” `EventStream` νƒ­μ—μ„ ν™•μΈ κ°€λ¥ν•©λ‹λ‹¤.  
