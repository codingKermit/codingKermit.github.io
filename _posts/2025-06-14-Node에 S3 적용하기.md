---
title: Nodeì— S3 ì ìš©í•˜ê¸°
date: 2025-06-15 17:08
categories:
  - Node.js
tags:
  - Node
  - express
  - aws
  - S3
_sort:
---
ì•ˆë…•í•˜ì„¸ìš” ğŸ¸  

## S3?
***S***imple ***S***torage ***S***ervice ì˜ ì•½ìë¡œ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
ì„œë²„ì—ì„œ ëª¨ë“  ì •ì  íŒŒì¼ì„ ì €ì¥í•˜ê³  ê´€ë¦¬í•œë‹¤ë©´ ì„œë²„ì— ë¶€í•˜ê°€ ë˜ê¸° ë•Œë¬¸ì— S3ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤

## í•„ìš” íŒ¨í‚¤ì§€ ì„¤ì¹˜

> npm i multer-s3 @aws-sdk/client-s3

## S3 ë²„í‚· ìƒì„± ë° ì„¤ì •
AWSì—ì„œ S3ë¥¼ ê²€ìƒ‰í•˜ì—¬ **ë²„í‚· ë§Œë“¤ê¸°** ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•„ë˜ í™”ë©´ìœ¼ë¡œ ì ‘ê·¼í•©ë‹ˆë‹¤.  
![](assets/img/Pasted%20image%2020250615173028.png)
<br>
ì—¬ê¸°ì„œ ìˆ˜ì •í•  ë¶€ë¶„ì€ **ë²„í‚· ì´ë¦„** ê³¼ **ì´ ë²„í‚·ì˜ í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ ì„¤ì •** ì…ë‹ˆë‹¤.  
ë²„í‚· ì´ë¦„ì€ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ë„ ì´ë¦„ì´ ê²¹ì¹˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ê³ ìœ í•œ ì´ë¦„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ê·¸ë¦¬ê³  ëª¨ë“  í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ì„ ì²´í¬ í•´ì œ í•©ë‹ˆë‹¤.  

> ì‹¤ì œë¡œ ì‹¤ë¬´ì—ì„œëŠ” ì„œë¹„ìŠ¤ê°€ **ëª¨ë“  í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨** ì„¤ì •ì„ ì²´í¬ í•´ì œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> í•™ìŠµì„ ìœ„í•´ ì´ì²˜ëŸ¼ í–ˆì„ ë¿ì…ë‹ˆë‹¤
> ì„œëª…ëœ URLì´ë‚˜ IAM ê¸°ë°˜ìœ¼ë¡œ ì ‘ê·¼í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ë³´ì•ˆìƒ ì¢‹ìŠµë‹ˆë‹¤ 

ë‚˜ë¨¸ì§€ëŠ” ê±´ë“œë¦´ ë¶€ë¶„ì´ ì—†ìŠµë‹ˆë‹¤.  
![](/assets/img/screenshot/Pasted%20image%2020250615174030.png)  
ë²„í‚· ë§Œë“¤ê¸°ë¥¼ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤.  
S3 ë²„í‚· ìƒì„±ì´ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## ì•¡ì„¸ìŠ¤ í‚¤ ìƒì„± ë° ì„¤ì •
![](/assets/img/screenshot/Pasted%20image%2020250615173921.png)  
ìš°ì¸¡ ìƒë‹¨ ë³¸ì¸ì˜ ì‚¬ìš©ì ì´ë¦„ì„ í´ë¦­í•˜ì—¬ ë³´ì•ˆ ìê²© ì¦ëª…ì„ ì„ íƒí•˜ì—¬ ì§„ì…í•©ë‹ˆë‹¤.

![](/assets/img/screenshot/Pasted%20image%2020250706173248.png)  
*ì•¡ì„¸ìŠ¤ í‚¤ ë§Œë“¤ê¸°* ë²„íŠ¼ì„ í†µí•´ ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
![](/assets/img/screenshot/Pasted%20image%2020250706173516.png)  
ë§Œë“¤ì–´ì§„ ì•¡ì„¸ìŠ¤í‚¤ì™€ ë¹„ë°€ ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ ë³µì‚¬í•´ì„œ ë©”ëª¨í•´ ë†“ì•„ì•¼ í•©ë‹ˆë‹¤  
ì•„ë‹ˆë©´ *.scv íŒŒì¼ ë‹¤ìš´ë¡œë“œ* ë²„íŠ¼ì„ í†µí•´ íŒŒì¼ë¡œ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.  
í•´ë‹¹ í˜ì´ì§€ë¥¼ ë²—ì–´ë‚˜ë©´ ë¹„ë°€ ì•¡ì„¸ìŠ¤ í‚¤ëŠ” ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤  

## S3 ì—°ê²°
ë¹„ë°€í‚¤ì™€ ë¹„ë°€ ì•¡ì„¸ìŠ¤ í‚¤ë¥¼ `.env` íŒŒì¼ì— ì €ì¥í•©ì‹œë‹¤.  
ë‹¤ìŒì€ ê¸°ì¡´ì— `multer` ë¥¼ ì‚¬ìš©í•´ì„œ íŒŒì¼ ì—…ë¡œë“œ í•˜ë˜ ìœ„ì¹˜ì—ì„œ `multer-s3` ë¡œ ë³€ê²½í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.  
ë‹¤ìŒì€ ì†ŒìŠ¤ ì½”ë“œì˜ ì˜ˆì‹œ ì…ë‹ˆë‹¤.  

```javascript
const {S3Client} = require('@aws-sdk/client-s3');
const multerS3 = require('multer-s3');
/*ìƒëµ*/

const s3 = new S3Client({
    credentials:{
        accessKeyId : process.env.S3_ACCESS_KEY, // ì•¡ì„¸ìŠ¤ í‚¤
        secretAccessKey : process.env.S3_SECRET_ACCESS_KEY // ë¹„ë°€ ì•¡ì„¸ìŠ¤ í‚¤
    },
    region:'ap-northeast-2' // ë²„í‚·ì˜ ë¦¬ì „. ë²„í‚· ì •ë³´ì—ì„œ í™•ì¸ ê°€ëŠ¥
})

const upload = multer({
    storage:multerS3({
        s3,
        bucket:'nodebird-study-codingkermit', // ë²„í‚· ëª…
        key(req,file,cb){
            cb(null,`original/${Date.now()}_${file.originalname}`);
        },
        // ê³µê°œ íŒŒì¼ì¸ ê²½ìš° í¼ë¸”ë¦­ ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” ì˜µì…˜
        // acl:'public-read' 
    }),
    limits:{
        fileSize:50*1024*1024,
    },
});

// ê¸°ì¡´ì˜ multer ë¯¸ë“¤ì›¨ì–´ì™€ ì‚¬ìš© ë°©ë²•ì€ ë™ì¼í•˜ë‹¤
router.post('/img', isLoggedIn, upload.single('img'), afterUploadImage);


```


---
ì°¸ê³  :  <https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/s3/>
<https://www.npmjs.com/package/@aws-sdk/client-s3>
